/*
 * Tiny Circleslider 1.5
 * http://www.baijs.nl/tinycircleslider/
 *
 * Copyright 2010, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 27 /03 / 2012
 * Depends on library: jQuery
 *
 */
(function(a){'use strict';function s(n,c){function C(b){p=setTimeout(function(){f.gotoSlide(void 0!==g[e+1]?e+1:0,!0)},b?50:c.intervaltime)}function D(){var b=a(".dot",d),h=b.outerWidth(),E=b.outerHeight(),e=document.createDocumentFragment(),q={},f=0,g={left:0,top:0},l=360/m*(Math.PI/180);b.remove();for(var k=m;k--;)f=k+1,q=b.clone(),g.top=Math.round(-Math.cos(k*l)*c.radius+(t/2-E/2)),g.left=Math.round(Math.sin(k*l)*c.radius+(u/2-h/2)),q.addClass("dot-"+f),q.css(g),q.html("<span>"+f+"</span>"),e.appendChild(q[0]);
d.append(e);v=a(".dot",d)}function w(b){return b+(360<b?-360:0>b?360:0)}function A(b,a,c,d){l+=1;var e=w(Math.round(l*b+h));l===c&&d&&f.startInterval();x(e,l===c);l<c?B=setTimeout(function(){A(b,a,c,d)},50):(l=0,h=a)}function s(b){var a=b.pageX-d.offset().left-u/2;b=b.pageY-d.offset().top-t/2;a=Math.atan2(a,-b);h=w(180*a/Math.PI);x(h);return!1}function x(b,a){e=Math.round(b*m/360);e=e===m?0:e;r[0].style.left=-(b/360*y*m)+"px";k.style.top=Math.round(-Math.cos(b*(Math.PI/180))*c.radius+(t/2-F/2))+"px";
k.style.left=Math.round(Math.sin(b*(Math.PI/180))*c.radius+(u/2-G/2))+"px";"function"===typeof c.callback&&a&&c.callback.call(n,g[e],e)}function H(b){a(document).unbind("mousemove");document.onmouseup=k.onmouseup=null;clearTimeout(B);c.snaptodots&&(c.hidedots&&v.stop(!0,!0).fadeOut("slow"),b=Math.round(h/(360/m)),f.gotoSlide(b));f.startInterval();return!1}function I(b){clearTimeout(p);a(document).mousemove(s);document.onmouseup=k.onmouseup=H;c.snaptodots&&c.hidedots&&v.stop(!0,!0).fadeIn("slow");
return!1}var d=n,u=d.outerWidth(),t=d.outerHeight(),k=a(".thumb",d)[0],G=a(k).outerWidth(),F=a(k).outerHeight(),r=a(".overview",d),g=r.children(),v={},z=a("a",g),y=a(g[0]).outerWidth(!0),B=void 0,p=void 0,m=g.length,h=10,l=0,e=0,f=this;this.startInterval=function(b){c.interval&&C(b)};this.stopInterval=function(){clearTimeout(p)};this.gotoSlide=function(b,a){var c=b*(360/m),d=0,e=0,f=0,g=0;c>h&&(d=c-h,e=-(h+(360-c)));c<h&&(d=c+(360-h),e=-(h-c));f=d<Math.abs(e)?d:e;g=Math.ceil(Math.abs(f)/10);A(f/g||
0,c,g,a)};r.append(a(g[0]).clone());g=r.children();r[0].style.width=y*g.length+"px";c.snaptodots&&D();(function(){k.onmousedown=I;d.bind("touchstart",function(){clearTimeout(p);a(this).data("pan",{startX:event.targetTouches[0].screenX,lastX:event.targetTouches[0].screenX,startTime:(new Date).getTime(),distance:function(){return Math.round(this.startX-this.lastX)},delta:function(){var b=event.targetTouches[0].screenX,a=Math.round(this.lastX-b);this.lastX=b;return a},duration:function(){return(new Date).getTime()-
this.startTime}});return!1});d.bind("touchmove",function(){var b=a(this).data("pan");h=w(h+Math.round(720*b.delta()/(y*m)));x(h);return!1});d.bind("touchend",function(){var b=a(this).data("pan");0===b.distance()&&500>b.duration()&&d.trigger("click");f.startInterval();return!1});0<z.length&&d.css({cursor:"pointer"}).click(function(b){a(b.target).hasClass("overlay")&&(c.lightbox?a(z[e]).trigger("click"):location.href=z[e].href);return!1});c.snaptodots&&d.delegate(".dot","click",function(){clearTimeout(p);
0===l&&f.gotoSlide(a(this).text()-1);f.startInterval()})})();f.gotoSlide(0);f.startInterval(!0)}a.tiny=a.tiny||{};a.tiny.circleslider={interval:!1,intervaltime:3500,snaptodots:!1,hidedots:!0,radius:140,lightbox:!1,callback:null};a.fn.tinycircleslider=function(n){var c=a.extend({},a.tiny.circleslider,n);this.each(function(){a(this).data("tcs",new s(a(this),c))});return a.extend(this,{gotoSlide:function(c,n){return this.each(function(){a(this).data("tcs").gotoSlide(c,n)})},stopInterval:function(){return this.each(function(){a(this).data("tcs").stopInterval()})},
startInterval:function(){return this.each(function(){a(this).data("tcs").startInterval()})}})}})(jQuery);