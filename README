/**************************************************************************

File: README

Description: Installation and configuration instructions for SimpleMappr. 

Developer: David P. Shorthouse
Email: davidpshorthouse@gmail.com

License: GPL
Copyright: David P. Shorthouse

**************************************************************************/

1. Make /tmp and /public/javascript/cache readable/writable by/to web server
2. Download map data from: Natural Earth Data: http://www.naturalearthdata.com/:
	http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/10m-cultural.zip
	http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/physical/10m-physical.zip
	http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/raster/HYP_HR_SR_W_DR.zip
	Extract to /lib/mapserver/maps/10m-cultural, /lib/mapserver/maps/10m-physical, /lib/mapserver/maps/HYP_HR_SR_W_DR, respectively
	I created a greyscale shaded relief geotiff using ogr2ogr on the full color NaturalEarth HYP_HR_SR_W_DR.zip.
	If you wish to obtain a copy of this geotiff, please contact me directly at davidpshorthouse@gmail.com.
3. Use MapServer's included shptree utility to make *.qix index files (e.g. shptree 10m_admin_0_countries.shp)
4. Make contents of /lib/mapserver/fonts readable/executable by web server
5. Adjust /config/conf.db.php.sample and /config/conf.php.sample and remove .sample extensions.
   These set db (MySQL) connections and constants, respectively.
6. The jQuery-based front-end assumes clean URLs. If served from Apache, use mod_rewrite as follows:
   <VirtualHost *:80>
     ServerName simplemappr.net
     ServerAlias simplemappr.net
     ServerAdmin dshorthouse@mbl.edu
     DocumentRoot /path/to/your/root
     RewriteEngine on
     RewriteRule ^/usermaps/(.*)$ /usermaps/index.php/$1
     <Directory "/path/to/your/root">
      Options -Indexes +FollowSymlinks
      AllowOverride None
      Order allow,deny
      Allow from all
      DirectoryIndex index.php index.html
     </Directory>
   </VirtualHost>

/***********************************************************************
* MACPORTS INSTALLATION FROM SOURCE: DO NOT USE THE AGED mapserver PORT
***********************************************************************/

sudo port install php5-gd
sudo port install xpm
sudo port install proj
sudo port install geos
sudo port install gdal

1. Download MapServer 5 tarball, http://mapserver.org/download.html (e.g. http://download.osgeo.org/mapserver/mapserver-5.6.6.tar.gz)
2. Extract and cd into folder
3. Execute from command line:

$ ./configure \
--prefix=/usr \
--with-agg \
--with-proj=/opt/local \
--with-geos=/opt/local/bin/geos-config \
--with-gdal=/opt/local/bin/gdal-config \
--with-threads \
--with-ogr \
--with-freetype=/opt/local \
--with-xpm=/opt/local \
--with-gd=/opt/local \
--with-wfs \
--with-wcs \
--with-wmsclient \
--with-wfsclient \
--with-sos \
--with-fribidi-config \
--with-experimental-png \
--with-php=/opt/local \
--with-png=/opt/local

4. Execute from command line: $ make
5. Verify that mapserv is working by executing ./mapserv -v
6. Find php_mapscript.so in mapscripts/php3 and move to extensions directory (usually /opt/local/lib/php/extensions/no-debug-non-zts-20090626/)
7. Move mapserv into cgi-bin folder for web server and give permission to execute if desire using it directly (optional)